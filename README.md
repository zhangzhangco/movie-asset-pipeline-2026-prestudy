# Movie Assetization Pipeline (Pre-Study 2026)

**å®éªŒæ€§é¡¹ç›®** - æ¢ç´¢ä»2Dç”µå½±ç”»é¢åˆ°3Dæ•°å­—èµ„äº§çš„è‡ªåŠ¨åŒ–ç”Ÿæˆç®¡çº¿

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ª**æ··åˆ3Dç”Ÿæˆç®¡çº¿ï¼ˆHybrid 3D Pipelineï¼‰**çš„æŠ€æœ¯éªŒè¯é¡¹ç›®ï¼Œç›®æ ‡æ˜¯å°†2Dç”µå½±é™å¸§/è§†é¢‘è‡ªåŠ¨è½¬æ¢ä¸ºå¯å¤ç”¨çš„3Dæ•°å­—èµ„äº§ã€‚é¡¹ç›®æ•´åˆäº†å¤šä¸ªå‰æ²¿AIæ¨¡å‹ï¼ˆml-sharp, DUSt3R, TRELLIS, SAM 3D Objectsï¼‰ï¼Œé€šè¿‡æ¨¡å—åŒ–ç¼–æ’å®ç°ç«¯åˆ°ç«¯çš„èµ„äº§ç”Ÿäº§æµç¨‹ã€‚

**å½“å‰çŠ¶æ€**: Phase 7 å®Œæˆ - æŠ€æœ¯éªŒè¯é˜¶æ®µï¼Œå·²å®Œæˆå¤šæ¡æŠ€æœ¯è·¯çº¿çš„å®éªŒå¯¹æ¯”

## ğŸ¯ æ ¸å¿ƒèƒ½åŠ›

### å·²å®ç°çš„æŠ€æœ¯è·¯çº¿

**è·¯çº¿A: åœºæ™¯é‡å»ºç®¡çº¿**
- ml-sharp (åœºæ™¯ç”Ÿæˆ) â†’ DUSt3R (å‡ ä½•é‡å»º) â†’ 3DGS è®­ç»ƒ
- é€‚ç”¨åœºæ™¯: å¤§åœºæ™¯/ç¯å¢ƒèµ„äº§
- çŠ¶æ€: âœ… å¯ç”¨

**è·¯çº¿B: å•å›¾é“å…·ç”Ÿæˆ**
- TRELLIS (Image-to-3D): ç›´æ¥ä»å•å¼ å›¾ç”Ÿæˆ3Dæ¨¡å‹
- é€‚ç”¨åœºæ™¯: ç‹¬ç«‹é“å…·å¿«é€Ÿç”Ÿæˆ
- çŠ¶æ€: âœ… ç”Ÿäº§å°±ç»ª

**è·¯çº¿C: SAM 3D Objects (å®éªŒä¸­)**
- Meta SAM 3D Objects: åˆ†å‰² + 3Dé‡å»º
- é€‚ç”¨åœºæ™¯: å¤šç‰©ä½“åœºæ™¯
- çŠ¶æ€: ğŸŸ¡ å®éªŒéªŒè¯ä¸­ (2026-02-21 åˆšè·‘é€š)

**è·¯çº¿D: è§†é¢‘é‡å»º (hobbyist_3dgs)**
- COLMAP/GLOMAP + 3DGS æ·±åº¦è®­ç»ƒ
- é€‚ç”¨åœºæ™¯: é«˜ä¿çœŸåœºæ™¯é‡å»º
- çŠ¶æ€: ğŸŸ¡ å®éªŒä¸­ (experiments/hobbyist_3dgs/)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- **OS**: Linux (Ubuntu 22.04+)
- **GPU**: NVIDIA RTX A6000 æˆ–åŒç­‰çº§ (24GB+ VRAM)
- **Conda**: å·²å®‰è£…å¹¶åˆå§‹åŒ–

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†ä»“åº“
git clone <repo_url>
cd preStudy

# 2. å®‰è£…åŸºç¡€åŒ…
pip install -e .

# 3. è®¾ç½®å„ä¸ªå­ç¯å¢ƒ (å‚è€ƒ scripts/setup_*.sh)
bash scripts/setup_dust3r.sh
# ... å…¶ä»–ç¯å¢ƒè®¾ç½®è§ scripts/ ç›®å½•
```

### è¿è¡Œç®¡çº¿

**åŸºç¡€ç”¨æ³• (TRELLISåç«¯)**:
```bash
python pipeline_runner.py --input /path/to/image.png
```

**ä½¿ç”¨SAM3Dåç«¯**:
```bash
python pipeline_runner.py --input /path/to/image.png \
    --asset_gen_backend sam3d_objects
```

**è·³è¿‡è€—æ—¶çš„åœºæ™¯ç”Ÿæˆ**:
```bash
python pipeline_runner.py --input /path/to/image.png \
    --skip_scene
```

**é«˜çº§é€‰é¡¹**:
- `--output_root`: è‡ªå®šä¹‰è¾“å‡ºç›®å½• (é»˜è®¤: `outputs/pipeline_demo`)
- `--skip_geometry`: è·³è¿‡DUSt3Rå‡ ä½•é‡å»º
- `--roi_hint x,y,w,h`: æ‰‹åŠ¨æŒ‡å®šé“å…·æå–åŒºåŸŸ
- `--disable_skin_rejection`: ç¦ç”¨è‚¤è‰²æ‹’ç»æœºåˆ¶

### è¾“å‡ºç»“æ„

è¾“å‡ºæŒ‰ä¼šè¯IDç»„ç»‡åœ¨ `outputs/pipeline_demo/<image_name>/`:

```
outputs/pipeline_demo/06136/
â”œâ”€â”€ report.html              # ğŸ“Š å¯è§†åŒ–æŠ¥å‘Š (ä»è¿™é‡Œå¼€å§‹æŸ¥çœ‹!)
â”œâ”€â”€ scene_visual/            # åœºæ™¯3DGSèƒŒæ™¯ (.ply)
â”œâ”€â”€ dust3r/                  # DUSt3Rå‡ ä½•ç‚¹äº‘ (.ply)
â”œâ”€â”€ props/                   # æå–çš„2Dè£å‰ª & é‡å…‰ç…§æ£€æŸ¥å›¾
â””â”€â”€ props_3d/                # æœ€ç»ˆ3Dèµ„äº§ (.ply) + å…ƒæ•°æ® (.json)
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### ç›®å½•ç»“æ„
```
preStudy/
â”œâ”€â”€ pipeline_runner.py       # ğŸ¯ ä¸»å…¥å£ - ç®¡çº¿ç¼–æ’å™¨
â”œâ”€â”€ src/                     # æ ¸å¿ƒä»£ç åŸŸ
â”‚   â”œâ”€â”€ core/                # åŸºç¡€è®¾æ–½å±‚ (runner_utils.py ç­‰)
â”‚   â””â”€â”€ steps/               # åŸå­åŒ–èƒ½åŠ›å•å…ƒ
â”‚       â”œâ”€â”€ scene_gen/       # ml-sharp åœºæ™¯ç”Ÿæˆ
â”‚       â”œâ”€â”€ geometry/        # DUSt3R å‡ ä½•é‡å»º
â”‚       â”œâ”€â”€ assets/          # TRELLIS/SAM3D + é“å…·æå–
â”‚       â”œâ”€â”€ lighting/        # å…‰ç…§æ¢é’ˆæå–
â”‚       â”œâ”€â”€ export/          # GB/T 36369 å°è£…
â”‚       â””â”€â”€ report/          # HTMLæŠ¥å‘Šç”Ÿæˆ
â”œâ”€â”€ movie_asset_3dgs/        # åŸºç¡€åº“ (EXRåŠ è½½/è‰²å½©ç®¡ç†)
â”œâ”€â”€ modules/                 # å¤–éƒ¨æ¨¡å‹ä¾èµ–
â”œâ”€â”€ experiments/             # å®éªŒæ•°æ®
â”œâ”€â”€ scripts/                 # å·¥å…·è„šæœ¬
â””â”€â”€ docs/                    # æ–‡æ¡£æ€»ç›®å½•
    â”œâ”€â”€ academic/            # [é™æ€å‚è€ƒ] è®ºæ–‡è‰ç¨¿ä¸æŠ€æœ¯æŠ¥å‘Š
    â”œâ”€â”€ architecture/        # [æ´»åŠ¨/æ¼”è¿›] æ ¸å¿ƒæ¶æ„æ–¹æ¡ˆ (åŒ…å«æœ€æ–°çš„ technical_architecture)
    â”œâ”€â”€ guidelines/          # [æ´»åŠ¨å‡†åˆ™] SOPå®ˆåˆ™ä¸Agentåä½œè§„èŒƒ (å¦‚ AGENTS.md, GEMINI.md)
    â”œâ”€â”€ manuals/             # [å®æ“è®°å½•] å®‰è£…æ‰‹å†Œä¸æ’éšœæŒ‡å— (å¦‚ Trellis2)
    â”œâ”€â”€ planning/            # [å†å²è“å›¾] æ—©æœŸé¡¹ç›®è§„åˆ’ã€å¤§æ–¹æ¡ˆä¸è¿›åº¦è®¡åˆ’
    â”œâ”€â”€ research/            # [é™æ€å‚è€ƒ] è¡Œä¸šç«å“ä¸å¤–éƒ¨å‚è€ƒèµ„æ–™
    â””â”€â”€ standards/           # [é™æ€å‚è€ƒ] GB/T 36369 ç­‰å›½å®¶/è¡Œä¸šæ ‡å‡†
### æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ | ç¯å¢ƒ | çŠ¶æ€ |
|------|------|------|------|
| åœºæ™¯ç”Ÿæˆ | ml-sharp | `sharp` | âœ… å¯ç”¨ |
| å‡ ä½•é‡å»º | DUSt3R | `dust3r` | âœ… å¯ç”¨ |
| é“å…·ç”Ÿæˆ | TRELLIS | `trellis` | âœ… ç”Ÿäº§å°±ç»ª |
| é“å…·ç”Ÿæˆ | SAM 3D Objects | `sam3d-objects` | ğŸŸ¡ å®éªŒä¸­ |
| è§†é¢‘é‡å»º | COLMAP/3DGS | `base` | ğŸŸ¡ å®éªŒä¸­ |
| èµ„äº§æå– | GrabCut + äººè„¸æ£€æµ‹ | `base` | âœ… å¯ç”¨ |

### æ•°æ®æµ

```mermaid
graph LR
    A[è¾“å…¥å›¾ç‰‡] --> B{è·¯ç”±å†³ç­–}
    B -->|å•å›¾| C[Track A: TRELLIS/SAM3D]
    B -->|åœºæ™¯| D[Track B: ml-sharp + DUSt3R]
    B -->|è§†é¢‘| E[Track C: COLMAP + 3DGS]
    C --> F[å·¥ä¸šè§„èŒƒåŒ–]
    D --> F
    E --> F
    F --> G[GB/Tå°è£…]
    G --> H[äº¤ä»˜åŒ…]
```

## ğŸ“Š å®éªŒè®°å½•

### æœ€è¿‘å®éªŒ (2026-02-21)
- âœ… å‰¥ç¦» `pipeline_runner.py` åŸºç¡€è®¾æ–½å¹¶ä¸‹æ²‰è‡³ `src/core`ï¼Œå®Œæˆç¬¬å››é˜¶æ®µä»£ç æ¸…ç†å·¥ä½œ
- âœ… SAM 3D Objects æ¨¡å‹è·å–é—®é¢˜å·²è§£å†³
- âœ… å®Œæˆå¤šä¸ªSAM3Då®éªŒ (outputs/pipeline_demo/06136, 09265ç­‰)

### å†å²å®éªŒ
- `experiments/hobbyist_3dgs/city_max/`: 362å¸§è§†é¢‘é‡å»ºå®éªŒ
- `experiments/video_asset_test/`: è§†é¢‘èµ„äº§åŒ–æµ‹è¯•

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

**å¸¸è§é—®é¢˜**:

1. **TRELLISç¡®ä¿ä½¿ç”¨ `spconv-cu118`ï¼Œå‚è€ƒ `scripts/download_trellis.py`
2. **é“å…·æå–å¤±è´¥**: è°ƒæ•´ `harvest_hero_assets.py` ä¸­çš„ROIé˜ˆå€¼ï¼Œæˆ–ä½¿ç”¨ `--roi_hint` æ‰‹åŠ¨æŒ‡å®š
3. **æ˜¾å­˜ä¸è¶³**: ä½¿ç”¨ `--skip_scene` è·³è¿‡è€—æ˜¾å­˜çš„åœºæ™¯ç”Ÿæˆæ­¥éª¤
4. **SAM3Dæ¨¡å‹ç¼ºå¤±**: å‚è€ƒ `scripts/setup_sam3d_objects.md`

**ç¯å¢ƒè®¾ç½®**:
- å„condaç¯å¢ƒçš„è¯¦ç»†è®¾ç½®è§ `scripts/setup_*.sh`
- ç¡®è®¤ `modules/` ç›®å½•ä¸‹æœ‰å¯¹åº”çš„æ¨¡å‹ä»£ç 

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **æŠ€æœ¯æ¶æ„**: `docs/architecture/technical_architecture.md` - 3DGS vs NeRFå¯¹æ¯”ã€å·¥ç¨‹åŒ–è®¾è®¡
- **AIè§„èŒƒ**: `docs/guidelines/AGENTS.md` - AIåŠ©æ‰‹ä½¿ç”¨æŒ‡å—ä¸ä»£ç é£æ ¼çº¦å®š
- **å­¦æœ¯æ–‡æ¡£**: `docs/academic/manuscript_v2_supply_chain.md` - èµ„äº§ä¾›ç»™é“¾ç†è®ºæ¡†æ¶

## ğŸ”¬ ç ”ç©¶æ–¹å‘

æœ¬é¡¹ç›®æ˜¯ **"ç”µå½±å†…å®¹èµ„äº§åŒ–å·¥ç¨‹åŒ–è½¬æ¢ä¸è´¨é‡è¯„æµ‹å…³é”®æŠ€æœ¯"** ç ”ç©¶çš„ä¸€éƒ¨åˆ†ï¼Œæ¢ç´¢ï¼š
1. ç”Ÿæˆå¼AIåœ¨ç”µå½±èµ„äº§ç”Ÿäº§ä¸­çš„åº”ç”¨
2. å¤šæŠ€æœ¯è·¯çº¿çš„å¯¹æ¯”ä¸èåˆ
3. èµ„äº§è´¨é‡çš„å®¢è§‚è¯„æµ‹ä½“ç³»
4. ç¬¦åˆå›½å®¶æ ‡å‡†(GB/T 36369)çš„èµ„äº§ç®¡ç†

---
**é¡¹ç›®çŠ¶æ€**: å®éªŒéªŒè¯é˜¶æ®µ  
**ä½œè€…**: Zhang Xin  
**æœ€åæ›´æ–°**: 2026-02-21
