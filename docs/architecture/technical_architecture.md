# æŠ€æœ¯æž¶æž„æ–‡æ¡£ (Technical Architecture)

**æ–‡æ¡£çŠ¶æ€**: å®žéªŒéªŒè¯é˜¶æ®µ - åæ˜ å½“å‰å¤šæŠ€æœ¯è·¯çº¿å¹¶è¡ŒæŽ¢ç´¢çš„çœŸå®žæƒ…å†µ  
**æœ€åŽæ›´æ–°**: 2026-02-21

## 0. æž¶æž„æ¼”è¿›è¯´æ˜Ž

æœ¬é¡¹ç›®å¤„äºŽ**æŠ€æœ¯éªŒè¯é˜¶æ®µ**ï¼Œç›®å‰å¹¶éžå•ä¸€æŠ€æœ¯è·¯çº¿ï¼Œè€Œæ˜¯**å››æ¡å¹¶è¡ŒæŠ€æœ¯è·¯çº¿çš„å¯¹æ¯”å®žéªŒ**ï¼š

| è·¯çº¿ | æ ¸å¿ƒæŠ€æœ¯ | é€‚ç”¨åœºæ™¯ | å½“å‰çŠ¶æ€ |
|------|---------|---------|---------|
| **A: åœºæ™¯é‡å»º** | ml-sharp + DUSt3R + 3DGS | å¤§åœºæ™¯/çŽ¯å¢ƒ | âœ… å¯ç”¨ |
| **B: å•å›¾ç”Ÿæˆ** | TRELLIS (Image-to-3D) | ç‹¬ç«‹é“å…· | âœ… ç”Ÿäº§å°±ç»ª |
| **C: SAM3D** | SAM 3D Objects | å¤šç‰©ä½“åœºæ™¯ | ðŸŸ¡ å®žéªŒä¸­ (2026-02-21) |
| **D: è§†é¢‘é‡å»º** | COLMAP/GLOMAP + 3DGS | é«˜ä¿çœŸåœºæ™¯ | ðŸŸ¡ å®žéªŒä¸­ |

**è®¾è®¡ç†å¿µ**: ä¸é¢„è®¾"æœ€ä¼˜æ–¹æ¡ˆ"ï¼Œè€Œæ˜¯é€šè¿‡å®žé™…æ•°æ®å¯¹æ¯”å„æŠ€æœ¯è·¯çº¿çš„ä¼˜åŠ£ï¼Œä¸ºåŽç»­å†³ç­–æä¾›ä¾æ®ã€‚

## 1. æ ¸å¿ƒç®—æ³•å¯¹æ¯”ï¼š3DGS vs NeRF (Algorithm Strategy)

åœ¨ç”µå½±å†…å®¹èµ„äº§åŒ–åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯¹æ¯”äº† **NeRF (Neural Radiance Fields)** ä¸Ž **3DGS (3D Gaussian Splatting)**ï¼š

| ç»´åº¦ | NeRF (e.g., Instant-NGP) | 3DGS (Gaussian Splatting) | ç»“è®º |
| :--- | :--- | :--- | :--- |
| **è¡¨ç¤ºå½¢å¼** | éšå¼ç¥žç»ç½‘ç»œ (MLP) | æ˜¾ç¤ºç‚¹äº‘ (Gaussians) | **3DGS èƒœå‡º**ï¼šæ˜¾å¼èµ„äº§æ˜“äºŽç¼–è¾‘ã€å¯¼å…¥/å¯¼å‡ºæ ‡å‡†å¼•æ“Ž (UE5/Unity)ã€‚ |
| **è®­ç»ƒé€Ÿåº¦** | å¿« (åˆ†é’Ÿçº§) | æžå¿« (åˆ†é’Ÿçº§) | **3DGS èƒœå‡º**ï¼šè¿­ä»£åé¦ˆæ›´å³æ—¶ã€‚ |
| **æ¸²æŸ“é€Ÿåº¦** | æ…¢ (éœ€å…‰è¿½/Raymarching) | æžå¿« (å…‰æ …åŒ–ï¼Œ>100FPS) | **3DGS èƒœå‡º**ï¼šæ”¯æŒ 4K+ å®žæ—¶é¢„è§ˆï¼Œç¬¦åˆå¯¼æ¼”å®¡æŸ¥éœ€æ±‚ã€‚ |
| **æŠ—å™ªèƒ½åŠ›** | è¾ƒå¼º (å¹³æ»‘) | ä¸€èˆ¬ (æ˜“äº§ç”Ÿ Floaters) | **NeRF ä¼˜åŠ¿**ï¼šä½† 3DGS å¯é€šè¿‡æ­£åˆ™åŒ–é¡¹ä¼˜åŒ–ã€‚ |
| **æ˜¾å­˜å ç”¨** | ä½Ž (ç½‘ç»œæƒé‡) | é«˜ (ç™¾ä¸‡çº§é«˜æ–¯ç‚¹) | **éœ€ä¼˜åŒ–**ï¼šé€šè¿‡ A6000 (48GB) å¤§æ˜¾å­˜ä¼˜åŠ¿ + å‰ªæžç®—æ³•è§£å†³ã€‚ |

**å½“å‰å®žæ–½ç­–ç•¥**ï¼š
*   **è·¯çº¿A/D**: é‡‡ç”¨å®˜æ–¹ `3D-Gaussian-Splatting` (Inria) + hobbyist_3dgs å‚è€ƒå®žçŽ°
*   **è·¯çº¿B**: TRELLIS (Microsoft) - ç«¯åˆ°ç«¯ Image-to-3D
*   **è·¯çº¿C**: SAM 3D Objects (Meta) - åˆ†å‰²é©±åŠ¨çš„3Dé‡å»º
*   **æœªæ¥ä¼˜åŒ–**: è€ƒè™‘å¼•å…¥ `Scaffold-GS` ç­‰å˜ä½“è¿›è¡Œæ˜¾å­˜ä¼˜åŒ–

## 2. å½“å‰ç®¡çº¿æž¶æž„ (Current Pipeline Architecture)

### 2.1 ä¸»ç®¡çº¿ (pipeline_runner.py)

```mermaid
graph TD
    A[è¾“å…¥: å›¾ç‰‡/è§†é¢‘] --> B{è¾“å…¥ç±»åž‹åˆ¤æ–­}
    B -->|å•å›¾| C[èµ„äº§æå– harvest_hero_assets]
    B -->|åœºæ™¯| D[ml-sharp åœºæ™¯ç”Ÿæˆ]
    
    D --> E[DUSt3R å‡ ä½•é‡å»º]
    E --> F[å…‰ç…§ä¼°è®¡]
    
    C --> G{3Dç”ŸæˆåŽç«¯é€‰æ‹©}
    F --> G
    
    G -->|TRELLIS| H[TRELLIS Image-to-3D]
    G -->|SAM3D| I[SAM 3D Objects]
    
    H --> J[GB/T 36369 å°è£…]
    I --> J
    J --> K[HTMLæŠ¥å‘Šç”Ÿæˆ]
```

### 2.2 å®žéªŒç®¡çº¿ (experiments/hobbyist_3dgs)

```mermaid
graph LR
    A[è§†é¢‘è¾“å…¥] --> B[å…³é”®å¸§æå–]
    B --> C[COLMAP/GLOMAP SfM]
    C --> D[3DGS æ·±åº¦è®­ç»ƒ 30k iters]
    D --> E[PLYå¯¼å‡º]
```

### 2.3 å…³é”®æŠ€æœ¯å®žçŽ°

**èµ„äº§æå– (harvest_hero_assets.py)**:
- äººè„¸æ£€æµ‹ (Haar Cascade) â†’ å¤šäººç‰©ROIæ‰©å±•
- GrabCut æ™ºèƒ½åˆ†å‰² (ç”Ÿäº§çŽ¯å¢ƒè®¡åˆ’æ›¿æ¢ä¸ºSAM2)
- è‚¤è‰²æ‹’ç»æœºåˆ¶ (å¯é€šè¿‡ `--disable_skin_rejection` å…³é—­)
- æ”¯æŒæ‰‹åŠ¨ROIæç¤º (`--roi_hint x,y,w,h`)

**3Dç”ŸæˆåŽç«¯**:
- **TRELLIS**: ç«¯åˆ°ç«¯Image-to-3Dï¼Œè¾“å‡ºé«˜æ–¯ç‚¹äº‘(.ply)
- **SAM3D**: åˆ†å‰²é©±åŠ¨ï¼Œæ”¯æŒRGBAè¾“å…¥ï¼Œåˆ©ç”¨alphaé€šé“ä½œä¸ºmask

**å·¥ä¸šè§„èŒƒåŒ–** (è®¡åˆ’ä¸­):
- æ‹“æ‰‘é‡æž„ (Retopology)
- UVçƒ˜ç„™
- æ ¼å¼è½¬æ¢ (PLY â†’ USD)

**å…ƒæ•°æ®å°è£…**:
- GB/T 36369 æ•°å­—å¯¹è±¡æ ‡è¯†ç¬¦ (DOIB)
- æœ€å°å¯è¿½æº¯é›† (MTS): å†…å®¹æ‘˜è¦ã€æƒå±žã€èƒ½åŠ›ã€çŽ¯å¢ƒ

## 3. è´¨é‡è¯„æµ‹ä½“ç³» (Quality Evaluation - è§„åˆ’ä¸­)

**å½“å‰çŠ¶æ€**: ä¸»è¦ä¾èµ–äººå·¥è§†è§‰æ£€æŸ¥ + HTMLæŠ¥å‘Š

**è®¡åˆ’æŒ‡æ ‡**:

### 3.1 ä¿¡å·ä¿çœŸåº¦
- PSNR (ç›®æ ‡: > 32dB)
- SSIM (ç›®æ ‡: > 0.95)
- LPIPS (ç›®æ ‡: < 0.1)

### 3.2 èµ„äº§å®Œæ•´æ€§
- Floaters Ratio (æ¼‚æµ®ç‚¹å æ¯”)
- Multi-view Consistency (å¤šè§†è§’ä¸€è‡´æ€§)
- æ‹“æ‰‘è´¨é‡ (é¢æ•°/å¸ƒçº¿åˆç†æ€§)

### 3.3 å®žéªŒå¯¹æ¯”ç»´åº¦
- **TRELLIS vs SAM3D**: å•å›¾ç”Ÿæˆè´¨é‡ã€æ‹“æ‰‘æ¸…æ´åº¦ã€å¤„ç†æ—¶é—´
- **å•å›¾ vs è§†é¢‘**: å‡ ä½•ç²¾åº¦ã€çº¹ç†ä¿çœŸåº¦
- **ä¸åŒé‡‡æ ·çŽ‡**: è§†é¢‘é‡å»ºçš„æœ€ä¼˜å¸§é—´éš”

## 4. ç¡¬ä»¶ä¸ŽçŽ¯å¢ƒ (Hardware & Environment)

**å½“å‰å¹³å°**: NVIDIA RTX A6000 (48GB VRAM)

**çŽ¯å¢ƒé…ç½®**:
- OS: Ubuntu 22.04 LTS
- CUDA: 11.8 / 12.1
- Python: 3.10
- CondaçŽ¯å¢ƒéš”ç¦»:
  - `sharp`: ml-sharpåœºæ™¯ç”Ÿæˆ
  - `dust3r`: DUSt3Rå‡ ä½•é‡å»º
  - `trellis`: TRELLIS 3Dç”Ÿæˆ
  - `sam3d-objects`: SAM 3D Objects
  - `base`: åŸºç¡€PythonçŽ¯å¢ƒ (èµ„äº§æå–/å°è£…/æŠ¥å‘Š)

**æ˜¾å­˜ç®¡ç†**:
- TRELLIS: ~20GB (å•æ¬¡æŽ¨ç†)
- DUSt3R: ~15GB (tiledæ¨¡å¼)
- 3DGSè®­ç»ƒ: æ ¹æ®åœºæ™¯è§„æ¨¡åŠ¨æ€è°ƒæ•´

## 5. å½“å‰äº¤ä»˜ç‰© (Current Deliverables)

**å·²å®žçŽ°**:
1. âœ… `pipeline_runner.py` - ç«¯åˆ°ç«¯ç®¡çº¿ç¼–æŽ’å™¨
2. âœ… æ¨¡å—åŒ–æ­¥éª¤è„šæœ¬ (`src/steps/`)
3. âœ… HTMLå¯è§†åŒ–æŠ¥å‘Š
4. âœ… GB/T 36369 å…ƒæ•°æ®å°è£…

**å®žéªŒä¸­**:
- ðŸŸ¡ SAM3DåŽç«¯é›†æˆ
- ðŸŸ¡ è§†é¢‘é‡å»ºç®¡çº¿ (hobbyist_3dgs)
- ðŸŸ¡ å¤šæŠ€æœ¯è·¯çº¿å¯¹æ¯”æ•°æ®

**è®¡åˆ’ä¸­**:
- â³ è‡ªåŠ¨åŒ–è´¨é‡è¯„æµ‹
- â³ å·¥ä¸šè§„èŒƒåŒ–åŽå¤„ç† (æ‹“æ‰‘é‡æž„/UV)
- â³ USDæ ¼å¼å¯¼å‡º
