<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 650"
    style="font-family: 'Inter', 'Noto Sans SC', sans-serif;">
    <defs>
        <filter id="shadow">
            <feDropShadow dx="0" dy="2" stdDeviation="4" flood-opacity="0.12" />
        </filter>
        <marker id="arrow" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto">
            <path d="M0,0 L12,4 L0,8 L3,4 Z" fill="#D97706" />
        </marker>
        <marker id="arrowGray" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <path d="M0,0 L10,3.5 L0,7 L2,3.5 Z" fill="#64748B" />
        </marker>
    </defs>

    <!-- Background -->
    <rect width="100%" height="100%" fill="#FAFBFC" />

    <!-- Title -->
    <rect x="0" y="0" width="1100" height="55" fill="#1E293B" />
    <text x="550" y="30" text-anchor="middle" font-size="17" font-weight="600" fill="white">图 5-2c：ARP 工作流编排图（Workflow
        Orchestration）</text>
    <text x="550" y="48" text-anchor="middle" font-size="10" fill="#94A3B8">回答：ARP 如何根据策略，将管线编排为一次具体作业？ |
        本图仅出现管线块，不出现单个能力</text>

    <!-- INPUT -->
    <g transform="translate(40, 90)">
        <rect width="140" height="200" rx="10" fill="#F8FAFC" stroke="#E2E8F0" stroke-width="1.5"
            filter="url(#shadow)" />
        <rect x="0" y="0" width="140" height="32" rx="10" fill="#475569" />
        <text x="70" y="21" text-anchor="middle" font-size="12" font-weight="600" fill="white">作业输入</text>

        <text x="15" y="55" font-size="10" fill="#475569" font-weight="600">输入素材:</text>
        <text x="20" y="75" font-size="9" fill="#64748B">• 概念图</text>
        <text x="20" y="90" font-size="9" fill="#64748B">• 分镜参考</text>
        <text x="20" y="105" font-size="9" fill="#64748B">• 历史存量</text>

        <line x1="15" y1="115" x2="125" y2="115" stroke="#E2E8F0" />

        <text x="15" y="135" font-size="10" fill="#475569" font-weight="600">作业约束:</text>
        <text x="20" y="155" font-size="9" fill="#64748B">• 项目: 《XX》</text>
        <text x="20" y="170" font-size="9" fill="#64748B">• 等级: G2</text>
        <text x="20" y="185" font-size="9" fill="#64748B">• 时效: 4h</text>
    </g>

    <!-- ARP CORE -->
    <g transform="translate(220, 100)">
        <rect width="180" height="180" rx="12" fill="#FFFBEB" stroke="#F59E0B" stroke-width="2.5"
            filter="url(#shadow)" />
        <rect x="0" y="0" width="180" height="36" rx="12" fill="#D97706" />
        <text x="90" y="24" text-anchor="middle" font-size="14" font-weight="700" fill="white">ARP 策略中枢</text>

        <text x="15" y="58" font-size="10" font-weight="600" fill="#92400E">决策逻辑:</text>
        <text x="20" y="78" font-size="9" fill="#78350F">1. 读取作业约束</text>
        <text x="20" y="93" font-size="9" fill="#78350F">2. 匹配策略规则</text>
        <text x="20" y="108" font-size="9" fill="#78350F">3. 选择管线组合</text>
        <text x="20" y="123" font-size="9" fill="#78350F">4. 生成作业图 (DAG)</text>

        <rect x="15" y="138" width="150" height="28" rx="6" fill="#F59E0B" />
        <text x="90" y="157" text-anchor="middle" font-size="11" font-weight="600" fill="white">Workflow Graph</text>
    </g>

    <!-- Arrow: Input to ARP -->
    <line x1="180" y1="190" x2="220" y2="190" stroke="#64748B" stroke-width="2" marker-end="url(#arrowGray)" />

    <!-- WORKFLOW GRAPH AREA -->
    <rect x="430" y="70" width="630" height="490" rx="12" fill="#FEF9C3" stroke="#FDE047" stroke-width="2"
        stroke-dasharray="6" />
    <text x="745" y="95" text-anchor="middle" font-size="13" font-weight="600" fill="#A16207">生成的 Workflow
        Graph（作业实例）</text>

    <!-- Pipeline Block 1: Identity -->
    <g transform="translate(460, 120)">
        <rect width="180" height="60" rx="8" fill="#4F46E5" filter="url(#shadow)" />
        <text x="90" y="28" text-anchor="middle" font-size="12" font-weight="600" fill="white">身份化管线</text>
        <text x="90" y="46" text-anchor="middle" font-size="9" fill="#C7D2FE">Identity Pipeline</text>
    </g>

    <!-- Arrow 1 to 2 -->
    <path d="M 640 150 L 680 150 L 680 200 L 460 200 L 460 215" fill="none" stroke="#D97706" stroke-width="2.5"
        marker-end="url(#arrow)" />
    <text x="570" y="193" text-anchor="middle" font-size="9" fill="#92400E">→ G2需生成</text>

    <!-- Pipeline Block 2: Generation (Img2-3D) -->
    <g transform="translate(460, 220)">
        <rect width="180" height="60" rx="8" fill="#DC2626" filter="url(#shadow)" />
        <text x="90" y="28" text-anchor="middle" font-size="12" font-weight="600" fill="white">Image-to-3D 管线</text>
        <text x="90" y="46" text-anchor="middle" font-size="9" fill="#FECACA">Generation Pipeline</text>
    </g>

    <!-- Arrow 2 to 3 -->
    <line x1="640" y1="250" x2="680" y2="250" stroke="#D97706" stroke-width="2.5" marker-end="url(#arrow)" />

    <!-- Pipeline Block 3: Normalization -->
    <g transform="translate(700, 220)">
        <rect width="180" height="60" rx="8" fill="#2563EB" filter="url(#shadow)" />
        <text x="90" y="28" text-anchor="middle" font-size="12" font-weight="600" fill="white">工业规范化管线</text>
        <text x="90" y="46" text-anchor="middle" font-size="9" fill="#BFDBFE">Normalization Pipeline</text>
    </g>

    <!-- Arrow 3 to 4 -->
    <path d="M 880 280 L 880 320 L 640 320 L 640 340" fill="none" stroke="#D97706" stroke-width="2.5"
        marker-end="url(#arrow)" />

    <!-- Pipeline Block 4: Compliance (Parallel) -->
    <g transform="translate(460, 340)">
        <rect width="180" height="60" rx="8" fill="#059669" filter="url(#shadow)" />
        <text x="90" y="28" text-anchor="middle" font-size="12" font-weight="600" fill="white">合规审计管线</text>
        <text x="90" y="46" text-anchor="middle" font-size="9" fill="#A7F3D0">Compliance Pipeline</text>
    </g>

    <!-- Pipeline Block 5: Quality (Parallel) -->
    <g transform="translate(700, 340)">
        <rect width="180" height="60" rx="8" fill="#0284C7" filter="url(#shadow)" />
        <text x="90" y="28" text-anchor="middle" font-size="12" font-weight="600" fill="white">质量校验管线</text>
        <text x="90" y="46" text-anchor="middle" font-size="9" fill="#BAE6FD">Quality Pipeline</text>
    </g>

    <!-- Parallel Indicator -->
    <rect x="655" y="355" width="30" height="20" rx="4" fill="#FEF3C7" stroke="#F59E0B" />
    <text x="670" y="369" text-anchor="middle" font-size="9" font-weight="600" fill="#92400E">||</text>

    <!-- Arrow 4+5 to 6 -->
    <path d="M 550 400 L 550 445 L 670 445" fill="none" stroke="#D97706" stroke-width="2.5" />
    <path d="M 790 400 L 790 445 L 670 445" fill="none" stroke="#D97706" stroke-width="2.5" />
    <line x1="670" y1="445" x2="670" y2="470" stroke="#D97706" stroke-width="2.5" marker-end="url(#arrow)" />

    <!-- Pipeline Block 6: Delivery -->
    <g transform="translate(580, 475)">
        <rect width="180" height="60" rx="8" fill="#0D9488" filter="url(#shadow)" />
        <text x="90" y="28" text-anchor="middle" font-size="12" font-weight="600" fill="white">凭证交付管线</text>
        <text x="90" y="46" text-anchor="middle" font-size="9" fill="#99F6E4">Credential Pipeline</text>
    </g>

    <!-- Arrow: ARP to Graph -->
    <path d="M 400 190 Q 430 190 430 150 L 460 150" fill="none" stroke="#D97706" stroke-width="2.5"
        marker-end="url(#arrow)" />

    <!-- OUTPUT -->
    <g transform="translate(40, 340)">
        <rect width="140" height="150" rx="10" fill="#ECFEFF" stroke="#67E8F9" stroke-width="1.5"
            filter="url(#shadow)" />
        <rect x="0" y="0" width="140" height="32" rx="10" fill="#0891B2" />
        <text x="70" y="21" text-anchor="middle" font-size="12" font-weight="600" fill="white">作业输出</text>

        <text x="15" y="55" font-size="10" fill="#0E7490" font-weight="600">交付物:</text>
        <text x="20" y="75" font-size="9" fill="#155E75">• G2 工业资产包</text>
        <text x="20" y="90" font-size="9" fill="#155E75">• 溯源证据包</text>
        <text x="20" y="105" font-size="9" fill="#155E75">• 授权通证</text>

        <line x1="15" y1="115" x2="125" y2="115" stroke="#CFFAFE" />

        <text x="15" y="135" font-size="10" fill="#0E7490" font-weight="600">状态: 完成</text>
    </g>

    <!-- Arrow: Graph to Output -->
    <path d="M 580 505 L 430 505 L 430 415 L 180 415" fill="none" stroke="#64748B" stroke-width="2"
        marker-end="url(#arrowGray)" />

    <!-- Agent Annotation -->
    <rect x="220" y="320" width="180" height="90" rx="8" fill="#FDF4FF" stroke="#E879F9" stroke-width="1.5" />
    <text x="310" y="345" text-anchor="middle" font-size="11" font-weight="600" fill="#A855F7">Agent 执行层</text>
    <text x="310" y="365" text-anchor="middle" font-size="9" fill="#7E22CE">• 管线调度执行</text>
    <text x="310" y="380" text-anchor="middle" font-size="9" fill="#7E22CE">• 节点监控</text>
    <text x="310" y="395" text-anchor="middle" font-size="9" fill="#7E22CE">• 存证触发</text>

    <!-- Annotation -->
    <rect x="40" y="560" width="650" height="60" rx="8" fill="#F1F5F9" stroke="#E2E8F0" />
    <text x="365" y="585" text-anchor="middle" font-size="11" font-weight="600" fill="#334155">核心架构原则</text>
    <text x="365" y="605" text-anchor="middle" font-size="11" fill="#D97706" font-weight="bold">ARP 不调能力。ARP
        调管线。管线内部再调能力。</text>

    <!-- Footer -->
    <text x="550" y="635" text-anchor="middle" font-size="9" fill="#94A3B8">图 5-2c：ARP 工作流编排图 (Workflow Orchestration) ©
        2026</text>
</svg>